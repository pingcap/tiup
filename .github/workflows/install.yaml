name: install

on:
    pull_request:
        branches:
            - master
            - release-*

jobs:
    build:
        name: install
        runs-on: ubuntu-latest
        env:
            working-directory: ${{ github.workspace   }}/go/src/github.com/${{ github.repository   }}
        steps:
            - name: Check out code into the Go module directory
              uses: actions/checkout@v2
              with:
                ref: ${{ github.event.pull_request.head.sha  }}
                path: go/src/github.com/${{ github.repository  }}
            - name: Install And Check
              working-directory: ${{env.working-directory}}
              run: |
                sh install.sh
                source ~/.profile
                which tiup || (echo "no tiup found" && exit 1)